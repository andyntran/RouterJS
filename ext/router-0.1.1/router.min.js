window.Router||(window.Router=function(){var e=new function(){var e={},b=null,d=function(a){return a&&(a=a.toString().trim().replace(/^\/+|\/+$|\/[\w\-]+\.\w+$/g,""))?"/"+a+"/":"/"},l=function(a){return(a=a.substr(1,a.length-2))?a.split("/"):null},n=function(){var a=d(decodeURI("history"===b.mode?location.pathname:location.hash.substr(2)));"history"===b.mode&&(a=a.replace(b.root,"/"));return a},p=function(a,b,c){return":"===b[0]?(a.param||(a.param={}),a.param):a.children&&a.children[b]?a.children[b]:c?a.param?(c.push(b),a.param):null:(a.children||(a.children={}),a.children[b]={},a.children[b])},g=function(a,b,c){if(a&&b&&b.length){var d=b.shift();a=p(a,d,c);return g(a,b,c)}return a},m=function(a,b){if(b){var c=d(a),c=l(c);g(e,c).handler=b}},h=function(){var a=[],f=n(),c=b.root.source.substr(1)+f.substr(1),f=l(f),d=g(e,f,a);d&&d.handler?window.setTimeout(function(){d.handler.apply(window,a);if(b.onNavigateSuccess)b.onNavigateSuccess(c);if(b.onNavigateCompleted)b.onNavigateCompleted(c)},0):window.setTimeout(function(){if(b.onNavigateFail)b.onNavigateFail(c);if(b.onNavigateCompleted)b.onNavigateCompleted(c)},0)},k=function(a,b){var c="info";switch(b.toLowerCase()){case "warn":case "warning":c="warn";break;case "err":case "error":c="error"}console[c]("["+(new Date).toLocaleString()+"] "+a)},q=function(a,d){b.log(d,"error")};this.start=function(a){b||(b||(b={}),a||(a={}),b.mode="hash"!==a.mode&&history.pushState?"history":"hash",b.root=new RegExp("^"+(a.root?d(a.root):"/"),a.caseSensitive?null:"i"),b.log=a.log||k,b.error=a.error||q,a.onNavigateSuccess&&(b.onNavigateSuccess=a.onNavigateSuccess),a.onNavigateFail&&(b.onNavigateFail=a.onNavigateFail),a.onNavigateCompleted&&(b.onNavigateCompleted=a.onNavigateCompleted),window.addEventListener("history"===b.mode?"popstate":"hashchange",h),h());return this};this.routes=function(a,b){if(a)switch(typeof a){case "string":m(a,b);break;case "object":var c=null;for(c in a)m(c,a[c])}return this};this.navigate=function(a){b?(a=d(a).replace(b.root,"/"),"history"===b.mode?history.pushState(null,null,b.root.source.substr(1)+a.substr(1)):location.hash="#!"+a,h()):k('Unable to navigate to path "'+a+'" because the router has not been configured through .start() yet.',"ERROR");return this};this.normalizePath=function(a){return b?b.root.source.substr(1)+d(a).substr(1):(k('Unable to normalize the path "'+a+'" because the router has not been configured through .start() yet.',"ERROR"),null)}};Object.freeze(e);return e}());