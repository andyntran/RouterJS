window.Router||(window.Router=function(){var e=new function(){var e={},b=null,d=function(a){return a&&(a=a.toString().trim().replace(/^\/+|\/+$|\/[\w\-]+\.\w+$/g,""))?"/"+a+"/":"/"},g=function(a){return b.root.source.substr(1)+d(a).replace(b.root,"/").substr(1)},m=function(a){return(a=a.substr(1,a.length-2))?a.split("/"):null},p=function(){var a=d(decodeURI("history"===b.mode?location.pathname:location.hash.substr(2)));"history"===b.mode&&(a=d(a).replace(b.root,"/"));return a},q=function(a,b,c){return":"===b[0]?(a.param||(a.param={}),a.param):a.children&&a.children[b]?a.children[b]:c?a.param?(c.push(b),a.param):null:(a.children||(a.children={}),a.children[b]={},a.children[b])},h=function(a,b,c){if(a&&b&&b.length){var d=b.shift();a=q(a,d,c);return h(a,b,c)}return a},n=function(a,b){if(b){var c=d(a),c=m(c);h(e,c).handler=b}},k=function(){var a=[],f=p(),c=g(f),f=m(f),d=h(e,f,a);d&&d.handler?window.setTimeout(function(){d.handler.apply(window,a);if(b.onNavigateSuccess)b.onNavigateSuccess(c);if(b.onNavigateCompleted)b.onNavigateCompleted(c)},0):window.setTimeout(function(){if(b.onNavigateFail)b.onNavigateFail(c);if(b.onNavigateCompleted)b.onNavigateCompleted(c)},0)},l=function(a,b){var c="info";switch(b.toLowerCase()){case "warn":case "warning":c="warn";break;case "err":case "error":c="error"}console[c]("["+(new Date).toLocaleString()+"] "+a)},r=function(a,d){b.log(d,"error")};this.start=function(a){b||(b||(b={}),a||(a={}),b.mode="hash"!==a.mode&&history.pushState?"history":"hash",b.root=new RegExp("^"+(a.root?d(a.root):"/"),a.caseSensitive?null:"i"),b.log=a.log||l,b.error=a.error||r,a.onNavigateSuccess&&(b.onNavigateSuccess=a.onNavigateSuccess),a.onNavigateFail&&(b.onNavigateFail=a.onNavigateFail),a.onNavigateCompleted&&(b.onNavigateCompleted=a.onNavigateCompleted),window.addEventListener("history"===b.mode?"popstate":"hashchange",k),k());return this};this.routes=function(a,b){if(a)switch(typeof a){case "string":n(a,b);break;case "object":var c=null;for(c in a)n(c,a[c])}return this};this.navigate=function(a){b?("history"===b.mode?history.pushState(null,null,g(a)):location.hash="#!"+d(a).replace(b.root,"/"),k()):l('Unable to navigate to path "'+a+'" because the router has not been configured through .start() yet.',"ERROR");return this};this.resolveFullPath=function(a){return b?g(a):(l('Unable to normalize the path "'+a+'" because the router has not been configured through .start() yet.',"ERROR"),null)}};Object.freeze(e);return e}());