window.Router||(window.Router=function(){var f=new function(){var f={},b=null,d=function(a){return a&&(a=a.toString().trim().replace(/^\/+|\/+$|\/[\w\-]+\.\w+$/g,""))?"/"+a+"/":"/"},k=function(a){return(a=a.substr(1,a.length-2))?a.split("/"):null},m=function(){var a=d(decodeURI("history"===b.mode?location.pathname:location.hash.substr(2)));"history"===b.mode&&(a=a.replace(b.root,"/"));return a},n=function(a,b,c){return":"===b[0]?(a.param||(a.param={}),a.param):a.children&&a.children[b]?a.children[b]:c?a.param?(c.push(b),a.param):null:(a.children||(a.children={}),a.children[b]={},a.children[b])},g=function(a,b,c){if(a&&b&&b.length){var d=b.shift();a=n(a,d,c);return g(a,b,c)}return a},l=function(a,b){if(b){var c=d(a),c=k(c);g(f,c).handler=b}},h=function(){var a=[],e=m(),c=k(e),d=g(f,c,a);d&&d.handler?window.setTimeout(function(){d.handler.apply(window,a);if(b.onNavigateSuccess)b.onNavigateSuccess(e);if(b.onNavigateCompleted)b.onNavigateCompleted(e)},0):window.setTimeout(function(){if(b.onNavigateFail)b.onNavigateFail(e);if(b.onNavigateCompleted)b.onNavigateCompleted(e)},0)},p=function(a,b){var c="info";switch(b.toLowerCase()){case "warn":case "warning":c="warn";break;case "err":case "error":c="error"}console[c]("["+(new Date).toLocaleString()+"] "+a)},q=function(a,d){b.log(d,"error")};this.start=function(a){b||(b||(b={}),a||(a={}),b.mode="hash"!==a.mode&&history.pushState?"history":"hash",b.root=new RegExp("^"+(a.root?d(a.root):"/"),a.caseSensitive?null:"i"),b.log=a.log||p,b.error=a.error||q,a.onNavigateSuccess&&(b.onNavigateSuccess=a.onNavigateSuccess),a.onNavigateFail&&(b.onNavigateFail=a.onNavigateFail),a.onNavigateCompleted&&(b.onNavigateCompleted=a.onNavigateCompleted),window.addEventListener("history"===b.mode?"popstate":"hashchange",h),h());return this};this.routes=function(a,b){if(a)switch(typeof a){case "string":l(a,b);break;case "object":var c=null;for(c in a)l(c,a[c])}return this};this.navigate=function(a){b&&(a=d(a),"history"===b.mode?history.pushState(null,null,b.root.source.substr(1)+a.substr(1)):location.hash="#!"+a,h());return this};this.normalizePath=function(a){return d(a)}};Object.freeze(f);return f}());