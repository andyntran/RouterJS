window.Router||(window.Router=function(){var f=new function(){var f={},b=null,g=function(a){return a&&(a=a.toString().trim().replace(/^\/+|\/+$|\/[\w\-]+\.\w+$/g,""))?"/"+a+"/":"/"},h=function(a){return g(a).replace(b.root,"/")},k=function(a){return b.root.source.substr(1)+h(a).substr(1)},n=function(a){return(a=a.substr(1,a.length-2))?a.split("/"):null},p=function(a){var d=g(decodeURI("history"===b.mode?location.pathname:location.hash.substr(2)));"history"===b.mode&&(d=a?k(d):h(d));return d},r=function(a,b,c){return":"===b[0]?(a.param||(a.param={}),a.param):a.children&&a.children[b]?a.children[b]:c?a.param?(c.push(b),a.param):null:(a.children||(a.children={}),a.children[b]={},a.children[b])},l=function(a,b,c){if(a&&b&&b.length){var e=b.shift();a=r(a,e,c);return l(a,b,c)}return a},q=function(a,b){if(b){var c=g(a),c=n(c);l(f,c).handler=b}},m=function(){var a=[],d=p(),d=n(d),c=l(f,d,a);c&&c.handler?window.setTimeout(function(){c.handler.apply(null,a);if(b.onNavigateSuccess)b.onNavigateSuccess();if(b.onNavigateCompleted)b.onNavigateCompleted()},0):window.setTimeout(function(){if(b.onNavigateFail)b.onNavigateFail();if(b.onNavigateCompleted)b.onNavigateCompleted()},0)},e=function(a,b){var c="info";switch(b.toLowerCase()){case "warn":case "warning":c="warn";break;case "err":case "error":c="error"}console[c]("["+(new Date).toLocaleString()+"] "+a)},t=function(a,d){b.log(d,"error")};this.config=function(a){a&&(b||(b={}),b.mode="hash"!==a.mode&&history.pushState?"history":"hash",b.root=new RegExp("^"+(a.root?g(a.root):"/"),a.caseSensitive?null:"i"),b.log=a.log||e,b.error=a.error||t,a.onNavigateSuccess&&(b.onNavigateSuccess=a.onNavigateSuccess),a.onNavigateFail&&(b.onNavigateFail=a.onNavigateFail),a.onNavigateCompleted&&(b.onNavigateCompleted=a.onNavigateCompleted),window.addEventListener("history"===b.mode?"popstate":"hashchange",m));return this};this.start=function(a){this.config(a);b?m():e("Unable to start because the Router has not been configured yet.","ERROR");return this};this.routes=function(a,b){if(a)switch(typeof a){case "string":q(a,b);break;case "object":var c=null;for(c in a)q(c,a[c])}return this};this.navigate=function(a){b?("history"===b.mode?history.pushState(null,null,k(a)):location.hash="#!"+h(a),m()):e('Unable to navigate to path "'+a+'" because the Router has not been configured yet.',"ERROR");return this};this.getCurrentPath=function(a){return b?p(a):(e("Unable to get the current path because the Router has not been configured yet.","ERROR"),null)};this.normalizePath=function(a){return b?h(a):(e('Unable to normalize the path "'+a+'" because the Router has not been configured yet.',"ERROR"),null)};this.resolveFullPath=function(a){return b?k(a):(e('Unable to resolve the full path of "'+a+'" because the Router has not been configured yet.',"ERROR"),null)}};Object.freeze(f);return f}());